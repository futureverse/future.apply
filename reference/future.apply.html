<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>future.apply: Apply Function to Elements in Parallel using Futures — future.apply • future.apply</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="future.apply: Apply Function to Elements in Parallel using Futures — future.apply"><meta name="description" content='The future.apply packages provides parallel implementations of
common "apply" functions provided by base R.  The parallel processing
is performed via the future ecosystem, which provides a large
number of parallel backends, e.g. on the local machine, a remote cluster,
and a high-performance compute cluster.'><meta property="og:description" content='The future.apply packages provides parallel implementations of
common "apply" functions provided by base R.  The parallel processing
is performed via the future ecosystem, which provides a large
number of parallel backends, e.g. on the local machine, a remote cluster,
and a high-performance compute cluster.'><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-SB3EQSD9FR"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-SB3EQSD9FR');
</script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">future.apply</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.11.3-9024</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/future.apply-1-overview.html">A Future for R: Apply Function to Elements in Parallel</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://www.futureverse.org/"><span class="fa fas fa-home"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-packages" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Packages</button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-packages"><li><a class="external-link dropdown-item" href="https://doFuture.futureverse.org">doFuture (map-reduce)</a></li>
    <li><a class="external-link dropdown-item" href="https://furrr.futureverse.org">furrr (map-reduce)</a></li>
    <li><a class="external-link dropdown-item" href="https://future.futureverse.org">future</a></li>
    <li><a class="dropdown-item" href="https://future.apply.futureverse.org">future.apply (map-reduce)</a></li>
    <li><a class="external-link dropdown-item" href="https://future.batchtools.futureverse.org">future.batchtools (backend)</a></li>
    <li><a class="external-link dropdown-item" href="https://future.callr.futureverse.org">future.callr (backend)</a></li>
    <li><a class="external-link dropdown-item" href="https://future.mirai.futureverse.org">future.mirai (backend)</a></li>
    <li><a class="external-link dropdown-item" href="https://future.tests.futureverse.org">future.tests</a></li>
    <li><a class="external-link dropdown-item" href="https://globals.futureverse.org">globals</a></li>
    <li><a class="external-link dropdown-item" href="https://listenv.futureverse.org">listenv</a></li>
    <li><a class="external-link dropdown-item" href="https://parallelly.futureverse.org">parallelly</a></li>
    <li><a class="external-link dropdown-item" href="https://progressr.futureverse.org">progressr</a></li>
    <li><a class="external-link dropdown-item" href="https://BiocParallel.FutureParam.futureverse.org">BiocParallel.FutureParam (experimental)</a></li>
    <li><a class="external-link dropdown-item" href="https://future.tools.futureverse.org">future.tools (experimental)</a></li>
    <li><a class="external-link dropdown-item" href="https://future.mapreduce.futureverse.org">future.mapreduce (experimental)</a></li>
    <li><a class="external-link dropdown-item" href="https://marshal.futureverse.org">marshal (experimental)</a></li>
  </ul></li>
<li class="nav-item"><a class="external-link nav-link" href="https://cloud.r-project.org/package=future.apply"><span class="fa fab fa-r-project"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/futureverse/future.apply/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>future.apply: Apply Function to Elements in Parallel using Futures</h1>
      <small class="dont-index">Source: <a href="https://github.com/futureverse/future.apply/blob/HEAD/R/future.apply-package.R" class="external-link"><code>R/future.apply-package.R</code></a></small>
      <div class="d-none name"><code>future.apply.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The <span class="pkg">future.apply</span> packages provides parallel implementations of
common "apply" functions provided by base <span style="R">R</span>.  The parallel processing
is performed via the <span class="pkg">future</span> ecosystem, which provides a large
number of parallel backends, e.g. on the local machine, a remote cluster,
and a high-performance compute cluster.</p>
    </div>


    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Currently implemented functions are:</p><ul><li><p><code><a href="future_apply.html">future_apply()</a></code>: a parallel version of <a href="https://rdrr.io/r/base/apply.html" class="external-link">apply()</a></p></li>
<li><p><code><a href="future_by.html">future_by()</a></code>: a parallel version of <a href="https://rdrr.io/r/base/by.html" class="external-link">by()</a></p></li>
<li><p><code><a href="future_lapply.html">future_eapply()</a></code>: a parallel version of <a href="https://rdrr.io/r/base/lapply.html" class="external-link">eapply()</a></p></li>
<li><p><code><a href="future_lapply.html">future_lapply()</a></code>: a parallel version of <a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply()</a></p></li>
<li><p><code><a href="future_mapply.html">future_mapply()</a></code>: a parallel version of <a href="https://rdrr.io/r/base/mapply.html" class="external-link">mapply()</a></p></li>
<li><p><code><a href="future_lapply.html">future_sapply()</a></code>: a parallel version of <a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply()</a></p></li>
<li><p><code><a href="future_lapply.html">future_tapply()</a></code>: a parallel version of <a href="https://rdrr.io/r/base/tapply.html" class="external-link">tapply()</a></p></li>
<li><p><code><a href="future_lapply.html">future_vapply()</a></code>: a parallel version of <a href="https://rdrr.io/r/base/lapply.html" class="external-link">vapply()</a></p></li>
<li><p><code><a href="future_mapply.html">future_Map()</a></code>: a parallel version of Map()</p></li>
<li><p><code><a href="future_lapply.html">future_replicate()</a></code>: a parallel version of <a href="https://rdrr.io/r/base/lapply.html" class="external-link">replicate()</a></p></li>
<li><p><code><a href="future_mapply.html">future_.mapply()</a></code>: a parallel version of <a href="https://rdrr.io/r/base/mapply.html" class="external-link">.mapply()</a></p></li>
</ul><p>Reproducibility is part of the core design, which means that perfect,
parallel random number generation (RNG) is supported regardless of the
amount of chunking, type of load balancing, and future backend being used.</p>
<p>Since these <code>future_*()</code> functions have the same arguments as the
corresponding base <span style="R">R</span> function, start using them is often as simple as
renaming the function in the code.  For example, after attaching the package:</p>
<p></p><div class="sourceCode r"><pre><code><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://future.apply.futureverse.org">future.apply</a></span><span class="op">)</span></span></code></pre><p></p></div>
<p>code such as:</p>
<p></p><div class="sourceCode r"><pre><code><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>a <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, beta <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="op">-</span><span class="fl">3</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span>, logic <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">TRUE</span>,<span class="cn">FALSE</span>,<span class="cn">FALSE</span>,<span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">quantile</span>, probs <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">/</span><span class="fl">4</span><span class="op">)</span></span></code></pre><p></p></div>
<p>can be updated to:</p>
<p></p><div class="sourceCode r"><pre><code><span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/future_lapply.html">future_lapply</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">quantile</span>, probs <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">/</span><span class="fl">4</span><span class="op">)</span></span></code></pre><p></p></div>
<p>The default settings in the <span class="pkg">future</span> framework is to process code
<em>sequentially</em>.  To run the above in parallel on the local machine
(on any operating system), use:</p>
<p></p><div class="sourceCode r"><pre><code><span><span class="fu"><a href="https://future.futureverse.org/reference/plan.html" class="external-link">plan</a></span><span class="op">(</span><span class="va">multisession</span><span class="op">)</span></span></code></pre><p></p></div>
<p>first.  That's it!</p>
<p>To go back to sequential processing, use <code>plan(sequential)</code>.
If you have access to multiple machines on your local network, use:</p>
<p></p><div class="sourceCode r"><pre><code><span><span class="fu"><a href="https://future.futureverse.org/reference/plan.html" class="external-link">plan</a></span><span class="op">(</span><span class="va">cluster</span>, workers <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"n1"</span>, <span class="st">"n2"</span>, <span class="st">"n2"</span>, <span class="st">"n3"</span><span class="op">)</span><span class="op">)</span></span></code></pre><p></p></div>
<p>This will set up four workers, one on <code>n1</code> and <code>n3</code>, and two on <code>n2</code>.
If you have SSH access to some remote machines, use:</p>
<p></p><div class="sourceCode r"><pre><code>plan(cluster, workers = c("m1.myserver.org", "m2.myserver.org))
</code></pre><p></p></div>
<p>See the <span class="pkg">future</span> package and <code><a href="https://future.futureverse.org/reference/plan.html" class="external-link">future::plan()</a></code> for more examples.</p>
<p>The <span class="pkg">future.batchtools</span> package provides support for high-performance
compute (HPC) cluster schedulers such as SGE, Slurm, and TORQUE / PBS.
For example,</p><ul><li><p><code>plan(batchtools_slurm)</code>:
Process via a Slurm scheduler job queue.</p></li>
<li><p><code>plan(batchtools_torque)</code>:
Process via a TORQUE / PBS scheduler job queue.</p></li>
</ul><p>This builds on top of the queuing framework that the <span class="pkg">batchtools</span>
package provides. For more details on backend configuration, please see
the <span class="pkg">future.batchtools</span> and <span class="pkg">batchtools</span> packages.</p>
<p>These are just a few examples of parallel/distributed backend for the
future ecosystem.  For more alternatives, see the 'Reverse dependencies'
section on the
<a href="https://cran.r-project.org/package=future" class="external-link">future CRAN package page</a>.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Useful links:</p><ul><li><p><a href="https://future.apply.futureverse.org">https://future.apply.futureverse.org</a></p></li>
<li><p><a href="https://github.com/futureverse/future.apply" class="external-link">https://github.com/futureverse/future.apply</a></p></li>
<li><p>Report bugs at <a href="https://github.com/futureverse/future.apply/issues" class="external-link">https://github.com/futureverse/future.apply/issues</a></p></li>
</ul></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Henrik Bengtsson, except for the implementations of <code><a href="future_apply.html">future_apply()</a></code>,
<code><a href="future_mapply.html">future_Map()</a></code>, <code><a href="future_lapply.html">future_replicate()</a></code>, <code><a href="future_lapply.html">future_sapply()</a></code>, and
<code><a href="future_lapply.html">future_tapply()</a></code>, which are adopted from the source code of the
corresponding base <span style="R">R</span> functions, which are licensed under GPL (&gt;= 2)
with 'The R Core Team' as the copyright holder.
Because of these dependencies, the license of this package is GPL (&gt;= 2).</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Henrik Bengtsson.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2</p> and <a href="https://github.com/HenrikBengtsson/pkgdown.extras/">pkgdown.extras</a> 0.0.0.9007.</p>
</div>

    </footer></div>





  </body></html>

